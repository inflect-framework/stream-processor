CREATE TABLE pipelines (
    id SERIAL PRIMARY KEY,                     -- Unique identifier for the pipeline
    name VARCHAR(255) NOT NULL UNIQUE,         -- Name of the pipeline, must be unique
    source_topic_id INT NOT NULL,              -- Foreign key to the source topic
    target_topic_id INT NOT NULL,              -- Foreign key to the target topic
    incoming_schema_id INT NOT NULL,           -- Foreign key to the incoming schema
    outgoing_schema_id INT NOT NULL,           -- Foreign key to the outgoing schema
    steps JSONB NOT NULL,                      -- JSONB column for steps
    is_active BOOLEAN NOT NULL DEFAULT true,
    -- Foreign key constraints with ON DELETE CASCADE
    CONSTRAINT fk_source_topic FOREIGN KEY (source_topic_id) REFERENCES topics(id),
    CONSTRAINT fk_target_topic FOREIGN KEY (target_topic_id) REFERENCES topics(id),
    CONSTRAINT fk_incoming_schema FOREIGN KEY (incoming_schema_id) REFERENCES schemas(id),
    CONSTRAINT fk_outgoing_schema FOREIGN KEY (outgoing_schema_id) REFERENCES schemas(id)
);

pg_dump -U postgres -F p your_database > output_file.sql

pg_dump -U postgres --no-owner --no-privileges -F p inflect > inflect_prototype_3.sql
